<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolyo</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Model Viewer (GLB dosyaları için) -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    
    <style>
        /* Ana sayfa fontu */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
        }

        /* Arama çubuğu placeholder rengi */
        ::placeholder {
            color: #6b7280; /* gray-500 */
            opacity: 1;
        }
        
        /* Modal Stilleri */
        #modal-container {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
        }
        #modal-container.open { opacity: 1; visibility: visible; }
        
        #modal-backdrop {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
        }
        #modal-backdrop.open { opacity: 1; visibility: visible; }

        /* Yatay kaydırma çubuğu (Modal içi) */
        .media-scroller::-webkit-scrollbar { height: 6px; }
        .media-scroller::-webkit-scrollbar-track { background: #1f2937; }
        .media-scroller::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 3px; }
        .media-scroller::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        /* Akordeon İçeriği Animasyonu */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        
        .accordion-content.open {
            max-height: 2000px; /* Yeterince büyük bir değer */
            transition: max-height 1s ease-in;
        }
        
        /* Aktif Akordeon Başlığı */
        .accordion-toggle.active {
            background-color: #1f2937; /* gray-800 */
        }
        
        /* Filtre Düğmeleri */
        .filter-button {
            color: #6b7280; /* gray-500 */
        }
        .filter-button.active {
            color: #ffffff; /* white */
        }
        
        /* Thumbnail Önizleme */
        #thumbnail-preview {
            position: fixed;
            z-index: 100;
            pointer-events: none;
            display: none; /* JS ile 'block' yapılacak */
            background-color: #1f2937; /* gray-800 */
            border: 1px solid #4b5563; /* gray-600 */
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }
        #thumbnail-image {
            width: 200px; /* 200px genişlik */
            height: auto;
        }
    </style>
</head>
<body class="bg-black text-gray-300 antialiased min-h-screen">

    <!-- Ana Konteyner -->
    <div class="p-4 md:p-8 lg:p-12">
        <!-- Arama Çubuğu -->
        <div class="mb-4">
            <input type="text" id="search-bar" 
                   placeholder="Search by project name, year, expression or collection..." 
                   class="w-full bg-black text-gray-200 text-lg placeholder-gray-600 focus:outline-none focus:ring-0 border-b border-gray-800 py-3">
        </div>
        
        <!-- Kategori Filtre Düğmeleri -->
        <div class="mb-6 flex flex-wrap gap-x-4 gap-y-2" id="filter-container">
            <span class="text-gray-500">Group by:</span>
            <!-- Filtre düğmeleri JavaScript ile buraya eklenecek -->
        </div>

        <!-- Akordeon/Tablo Başlığı (İsteğinize göre güncellendi) -->
        <div class="min-w-full table-auto border-b border-gray-800">
             <div class="flex">
                <div class="py-3 px-2 text-left text-gray-500 text-sm w-[40%]">Project Name</div>
                <div class="py-3 px-2 text-left text-gray-500 text-sm w-[20%]">Year</div>
                <div class="py-3 px-2 text-left text-gray-500 text-sm w-[20%]">Expression</div>
                <div class="py-3 px-2 text-left text-gray-500 text-sm w-[20%]">Collection</div>
            </div>
        </div>

        <!-- Proje Listesi / Akordeon Alanı -->
        <div id="accordion-container" class="min-w-full table-auto">
            <!-- Akordeon grupları JavaScript ile buraya eklenecek -->
        </div>
    </div>

    <!-- Thumbnail Önizleme Alanı -->
    <div id="thumbnail-preview">
        <img id="thumbnail-image" src="" alt="Önizleme">
    </div>

    <!-- Modal (Popup) Arka Planı -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/90 z-40"></div>

    <!-- Modal (Popup) Konteyneri (Resim 2'deki gibi) -->
    <div id="modal-container" class="fixed inset-4 md:inset-8 lg:inset-12 z-50">
        
        <!-- Modal İçeriği -->
        <div class="w-full h-full bg-black border border-white/20 rounded-lg shadow-2xl flex flex-col relative overflow-hidden">
            
            <!-- Kapatma Düğmesi -->
            <button id="modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white z-50 p-2 rounded-full bg-black/30 hover:bg-black/60 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <!-- Üst Kısım: Medya (%60) -->
            <div class="h-[60%] w-full bg-black/50 overflow-hidden">
                <div id="modal-media-scroller" class="media-scroller h-full w-full flex overflow-x-auto gap-1 p-1 items-center">
                    <!-- Medya (img, video, model-viewer) JavaScript ile buraya eklenecek -->
                </div>
            </div>

            <!-- Alt Kısım: Metin (%40) (Resim 2'deki 3 sütunlu yapı) -->
            <div class="h-[40%] w-full grid grid-cols-1 md:grid-cols-3 gap-6 p-6 overflow-y-auto text-gray-400 text-sm">
                
                <!-- Sütun 1: Metadata 1 -->
                <div id="modal-col-1" class="overflow-y-auto pr-4 space-y-2"></div>
                <!-- Sütun 2: Açıklama 1 -->
                <div id="modal-col-2" class="overflow-y-auto pr-4 text-gray-300 leading-relaxed"></div>
                <!-- Sütun 3: Açıklama 2 ve Metadata 2 -->
                <div id="modal-col-3" class="overflow-y-auto space-y-4">
                    <div id="modal-description-1" class="text-gray-300 leading-relaxed"></div>
                    <div id="modal-description-2" class="text-gray-300 leading-relaxed"></div>
                    <div id="modal-metadata-2" class="space-y-2 pt-4 border-t border-gray-800"></div>
                </div>

            </div>
        </div>
    </div>


    <script>
        // --- 1. VERİ YAPISI (Orijinal isteğinize göre yeniden düzenlendi) ---
        
        // Kategori anahtarları (Sıralama güncellendi: type, year, ...)
        const categoryDefinitions = {
            'type': { label: 'Type', getValue: p => p.categories.type },
            'year': { label: 'Year', getValue: p => p.categories.year },
            'reality': { label: 'Reality', getValue: p => p.categories.reality },
            'collection': { label: 'Collection', getValue: p => p.categories.collection },
            'medium': { label: 'Medium', getValue: p => p.categories.medium },
            'expression': { label: 'Expression', getValue: p => p.categories.expression },
            'kontentler': { label: 'Kontentler', getValue: p => p.categories.kontentler }
        };

        const projects = [
            {
                id: 1,
                name: "Metaverse Boyamaları",
                description1: "Metaverse için oluşturulmuş, merkezi olmayan bir render çiftliği kullanan dijital tablolar koleksiyonu.",
                description2: "Bu proje, sanal gerçeklikte sanatın sınırlarını zorluyor ve dijital mülkiyet kavramlarını araştırıyor.",
                thumbnail: "https://placehold.co/200x150/2c3e50/ecf0f1?text=Metaverse+Art",
                link: "https://example.com/project-1",
                media: [
                    { type: 'image', src: 'https://placehold.co/800x600/2c3e50/ecf0f1?text=Metaverse+Painting+1' },
                    { type: 'video', src: 'https://www.w3schools.com/html/mov_bbb.mp4' },
                    { type: 'image', src: 'https://placehold.co/800x600/34495e/ecf0f1?text=Metaverse+Painting+2' }
                ],
                categories: { 
                    reality: 'metaverse', 
                    year: '2025', 
                    type: 'painting', 
                    collection: 'diigtal tops', 
                    medium: 'render', 
                    expression: 'decentralize', 
                    kontentler: 'sergi' 
                }
            },
            {
                id: 2,
                name: "Robotik İkonlar",
                description1: "Gerçek dünyada (IRL) sergilenen, dini temaları ve robotik estetiği birleştiren bir fotoğraf serisi.",
                description2: "İnsan ve makine arasındaki ilişkiyi sorguluyor.",
                thumbnail: "https://placehold.co/200x150/9b59b6/ecf0f1?text=Robotic+Icons",
                link: "https://example.com/project-2",
                media: [
                    { type: 'image', src: 'https://placehold.co/800x600/9b59b6/ecf0f1?text=Photo+1' },
                    { type: 'image', src: 'https://placehold.co/800x600/8e44ad/ecf0f1?text=Photo+2' }
                ],
                categories: { 
                    reality: 'irl', 
                    year: '2024', 
                    type: 'image', 
                    collection: 'theaters', 
                    medium: 'photo', 
                    expression: 'religious robotics', 
                    kontentler: 'enstalasyon' 
                }
            },
            {
                id: 3,
                name: "DFW Web Deneyimi",
                description1: "DFW koleksiyonu için grafik tasarım odaklı bir web uygulaması ve video içeriği.",
                description2: "Kullanıcı etkileşimi ön planda tutulmuştur ve 3D modeller sergilenmektedir.",
                thumbnail: "https://placehold.co/200x150/3498db/ecf0f1?text=DFW+Web",
                link: "https://example.com/project-3",
                media: [
                    { type: 'glb', src: 'https://modelviewer.dev/shared-assets/models/Astronaut.glb' },
                    { type: 'image', src: 'https://placehold.co/800x600/3498db/ecf0f1?text=Web+App+Screenshot' },
                    { type: 'video', src: 'https://www.w3schools.com/html/mov_bbb.mp4' }
                ],
                categories: { 
                    reality: 'irl', 
                    year: '2023', 
                    type: 'video', // Orijinal veri: 'video'
                    collection: 'web app', // Orijinal veri: 'web app'
                    medium: 'graphic', 
                    expression: 'dfw', 
                    kontentler: 'interaktif' 
                }
            },
             {
                id: 7, // Diğer 2025 projesi
                name: "Fırça Darbeleri",
                description1: "Yine 2025 yılından, 'diigtal tops' koleksiyonunun bir parçası olan bir metaverse tablosu.",
                description2: "Soyut fırça darbeleri ve renk teorisi üzerine odaklanır.",
                thumbnail: "https://placehold.co/200x150/e67e22/ecf0f1?text=Strokes",
                link: "https://example.com/project-7",
                media: [ { type: 'image', src: 'https://placehold.co/800x600/e67e22/ecf0f1?text=Painting+A' } ],
                categories: { 
                    reality: 'metaverse', 
                    year: '2025', 
                    type: 'painting', 
                    collection: 'diigtal tops', 
                    medium: 'render', 
                    expression: 'soyut', 
                    kontentler: 'sergi' 
                }
            },
            {
                id: 6,
                name: "Mimari Dünya",
                description1: "2020 yılı için dünya inşası konseptli bir mimari proje.",
                description2: "Sanal dünyalar için ölçeklenebilir ve sürdürülebilir mimari çözümler üzerine odaklanıldı.",
                thumbnail: "https://placehold.co/200x150/f1c40f/333?text=World+Building",
                link: "https://example.com/project-6",
                media: [ { type: 'image', src: 'https://placehold.co/800x600/f1c40f/333?text=Architecture+1' } ],
                categories: { 
                    reality: 'metaverse', 
                    year: '2020', 
                    type: 'architecture', 
                    collection: 'world building', 
                    medium: 'render', 
                    expression: 'konsept', 
                    kontentler: 'sunum' 
                }
            }
        ];
        
        let currentGroupingKey = 'type'; // Varsayılan gruplama 'type' olarak güncellendi
        let currentSearchQuery = '';

        // --- 2. DOM ELEMENTLERİ ---
        const searchBar = document.getElementById('search-bar');
        const filterContainer = document.getElementById('filter-container');
        const accordionContainer = document.getElementById('accordion-container');
        
        const thumbnailPreview = document.getElementById('thumbnail-preview');
        const thumbnailImage = document.getElementById('thumbnail-image');
        
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalContainer = document.getElementById('modal-container');
        const modalCloseButton = document.getElementById('modal-close');
        
        const modalMediaScroller = document.getElementById('modal-media-scroller');
        const modalCol1 = document.getElementById('modal-col-1');
        const modalDesc1 = document.getElementById('modal-description-1');
        const modalDesc2 = document.getElementById('modal-description-2');
        const modalMeta2 = document.getElementById('modal-metadata-2');


        // --- 3. THUMBNAIL ÖNİZLEME FONKSİYONLARI (Geri eklendi) ---
        
        function showThumbnail(event, projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;

            thumbnailImage.src = project.thumbnail;
            
            // Mouse'un sağ alt tarafında göster
            thumbnailPreview.style.left = (event.pageX + 15) + 'px';
            thumbnailPreview.style.top = (event.pageY + 15) + 'px';
            thumbnailPreview.style.display = 'block';
        }

        function hideThumbnail() {
            thumbnailPreview.style.display = 'none';
        }
        
        // Mouse'u takip et (thumbnail'i gizlemek için)
        document.addEventListener('mousemove', (e) => {
            if (thumbnailPreview.style.display === 'block') {
                 thumbnailPreview.style.left = (e.pageX + 15) + 'px';
                 thumbnailPreview.style.top = (e.pageY + 15) + 'px';
            }
        });

        // --- 4. MODAL (POPUP) FONKSİYONLARI ---

        function createMetadataHtml(metadata) {
            let html = '';
            for (const key in metadata) {
                html += `
                    <div class="flex justify-between capitalize">
                        <span class="text-gray-500">${key}:</span>
                        <span class="text-gray-200 text-right">${metadata[key]}</span>
                    </div>`;
            }
            return html;
        }

        function openModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            modalMediaScroller.innerHTML = ''; // Temizle
            project.media.forEach(media => {
                let el;
                if (media.type === 'image') {
                    el = document.createElement('img');
                    el.src = media.src;
                    el.className = 'h-full w-auto rounded-md object-contain flex-shrink-0';
                } else if (media.type === 'video') {
                    el = document.createElement('video');
                    el.src = media.src;
                    el.controls = true;
                    el.className = 'h-full w-auto rounded-md flex-shrink-0';
                } else if (media.type === 'glb') {
                    el = document.createElement('model-viewer');
                    el.src = media.src;
                    el.className = 'h-full w-full min-w-[300px] md:min-w-[500px] rounded-md flex-shrink-0';
                    el.setAttribute('ar', '');
                    el.setAttribute('camera-controls', '');
                    el.setAttribute('auto-rotate', '');
                    el.setAttribute('shadow-intensity', '1');
                    el.setAttribute('background-color', '#000000');
                }
                if (el) modalMediaScroller.appendChild(el);
            });

            // Modal içeriğini `categories` objesinden ve proje ana objesinden oluştur
            const meta1 = {
                "Project": project.name,
                "Year": project.categories.year,
                "Type": project.categories.type,
                "Collection": project.categories.collection,
                "Reality": project.categories.reality,
            };
            
            const meta2 = {
                 "Medium": project.categories.medium,
                 "Expression": project.categories.expression,
                 "Kontentler": project.categories.kontentler,
                 "Link": `<a href="${project.link}" target="_blank" rel="noopener" class="text-blue-400 hover:underline">View</a>`
            };

            modalCol1.innerHTML = createMetadataHtml(meta1);
            modalDesc1.innerHTML = `<p>${project.description1}</p>`;
            modalDesc2.innerHTML = `<p>${project.description2}</p>`;
            modalMeta2.innerHTML = createMetadataHtml(meta2);

            modalBackdrop.classList.add('open');
            modalContainer.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modalBackdrop.classList.remove('open');
            modalContainer.classList.remove('open');
            document.body.style.overflow = 'auto';
            modalMediaScroller.innerHTML = '';
        }

        // --- 5. AKORDEON OLUŞTURMA VE FİLTRELEME ---

        function renderFilterButtons() {
            filterContainer.innerHTML = '<span class="text-gray-500 text-sm py-1">Group by:</span>';
            Object.keys(categoryDefinitions).forEach(key => {
                const button = document.createElement('button');
                button.className = 'filter-button capitalize px-3 py-1 rounded text-sm font-medium transition-colors duration-150 hover:text-white';
                button.textContent = categoryDefinitions[key].label;
                button.dataset.key = key;

                if (key === currentGroupingKey) {
                    button.classList.add('active');
                }

                button.addEventListener('click', () => {
                    currentGroupingKey = key;
                    renderAccordion();
                    updateActiveFilterButton();
                });
                
                filterContainer.appendChild(button);
            });
        }
        
        function updateActiveFilterButton() {
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.key === currentGroupingKey);
            });
        }
        
        // Arama ve gruplama fonksiyonu
        function renderAccordion() {
            accordionContainer.innerHTML = ''; // Listeyi temizle
            
            const groupingFunction = categoryDefinitions[currentGroupingKey].getValue;
            
            // 1. Projeleri ara (search) - Arama kriterleri güncellendi
            const searchedProjects = projects.filter(p => {
                if (!currentSearchQuery) return true;
                const query = currentSearchQuery.toLowerCase();
                return p.name.toLowerCase().includes(query) ||
                       p.categories.year.toLowerCase().includes(query) ||
                       p.categories.expression.toLowerCase().includes(query) ||
                       p.categories.collection.toLowerCase().includes(query);
            });
            
            // 2. Aranan projeleri grupla (group)
            const groups = searchedProjects.reduce((acc, project) => {
                const key = groupingFunction(project) || 'Diğer';
                if (!acc[key]) {
                    acc[key] = [];
                }
                acc[key].push(project);
                return acc;
            }, {});

            // 3. Grupları DOM'a ekle
            Object.keys(groups).sort().forEach(groupName => {
                const groupProjects = groups[groupName];

                // Grup Başlığı (Tıklanabilir)
                const groupToggle = document.createElement('div');
                groupToggle.className = 'accordion-toggle flex py-3 px-2 border-b border-gray-900 cursor-pointer hover:bg-gray-900/80 transition-colors duration-150';
                groupToggle.innerHTML = `<span class="text-gray-100 font-medium capitalize">${groupName}</span>`;
                
                // Proje Satırlarını içeren konteyner (Gizli)
                const contentDiv = document.createElement('div');
                contentDiv.className = 'accordion-content';
                
                groupProjects.forEach(project => {
                    const projectRow = document.createElement('div');
                    projectRow.className = 'flex hover:bg-gray-900/80 cursor-pointer transition-colors duration-150 ml-4'; // İçeride olduğunu göstermek için 'ml-4'
                    
                    // Sütunlar isteğinize göre güncellendi
                    projectRow.innerHTML = `
                        <div class="py-3 px-2 border-b border-gray-900 w-[40%] text-gray-100">${project.name}</div>
                        <div class="py-3 px-2 border-b border-gray-900 w-[20%]">${project.categories.year}</div>
                        <div class="py-3 px-2 border-b border-gray-900 w-[20%] capitalize">${project.categories.expression}</div>
                        <div class="py-3 px-2 border-b border-gray-900 w-[20%] capitalize">${project.categories.collection}</div>
                    `;
                    
                    // Popup açma olayı
                    projectRow.addEventListener('click', (e) => {
                        e.stopPropagation(); // Üstteki grup başlığının tıklanmasını engelle
                        openModal(project.id);
                    });
                    
                    // Thumbnail olayları (Geri eklendi)
                    projectRow.addEventListener('mouseenter', (e) => showThumbnail(e, project.id));
                    projectRow.addEventListener('mouseleave', hideThumbnail);
                    
                    contentDiv.appendChild(projectRow);
                });
                
                // Tıklama olayı (Grubu aç/kapat)
                groupToggle.addEventListener('click', () => {
                    groupToggle.classList.toggle('active');
                    contentDiv.classList.toggle('open');
                });
                
                // Grup başlığı için Thumbnail olayları (Geri eklendi)
                // Grubun ilk projesinin thumbnail'ini gösterir
                if (groupProjects.length > 0) {
                    groupToggle.addEventListener('mouseenter', (e) => showThumbnail(e, groupProjects[0].id));
                    groupToggle.addEventListener('mouseleave', hideThumbnail);
                }
                
                accordionContainer.appendChild(groupToggle);
                accordionContainer.appendChild(contentDiv);
            });
            
             // Arama sonucu boşsa mesaj göster
            if (searchedProjects.length === 0) {
                 accordionContainer.innerHTML = `
                    <div class="py-6 px-2 text-center text-gray-500">
                        Arama kriterlerine uygun proje bulunamadı.
                    </div>`;
            }
        }

        // --- 6. BAŞLATMA ---

        function init() {
            // Modal kapatma olayları
            modalCloseButton.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', closeModal);
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });

            // Arama çubuğu olayı
            searchBar.addEventListener('input', (e) => {
                currentSearchQuery = e.target.value;
                renderAccordion(); // Arama yapıldığında listeyi yeniden çiz
            });

            // İlk render
            renderFilterButtons();
            renderAccordion(); // 'type' (varsayılan) ile gruplayarak başla
        }

        // DOM yüklendiğinde başlat
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
